{"ast":null,"code":"import io from \"socket.io-client\";\nlet socket = null; // temp\n\nconst SOCKET_URL = process.env.NODE_ENV === \"production\" ? \"/\" : \"http://localhost:5001\";\nexport function initAndJoin(roomId) {\n  // https://stackoverflow.com/questions/44628363/socket-io-access-control-allow-origin-error/64805972\n  // socket = io(SOCKET_URL, { transports: [\"websocket\"] });\n  socket = io(SOCKET_URL);\n  console.log(\"[socket] init\", SOCKET_URL);\n  socket.on(\"connect\", () => {\n    console.log(\"[socket] connect\");\n  });\n\n  if (socket && roomId) {\n    console.log(\"[socket] join: roomId\", roomId);\n    socket.emit(\"join\", roomId);\n  }\n}\nexport function disconnect() {\n  if (!socket) return;\n  console.log(\"[socket] disconnect\");\n  socket.disconnect();\n}\nexport function subscribe(handler) {\n  if (!socket) return;\n  console.log(\"[socket] fieldState\");\n  socket.on(\"fieldState\", handler);\n}\nexport function changeDestination(roomId, destination) {\n  if (!socket) return;\n  console.log(\"[socket] changeDestination\");\n  let monster = {\n    destination // temp\n    // location: destination,\n\n  };\n  socket.emit(\"changeDestination\", {\n    roomId,\n    monster\n  });\n}","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/apis/socket.js"],"names":["io","socket","SOCKET_URL","process","env","NODE_ENV","initAndJoin","roomId","console","log","on","emit","disconnect","subscribe","handler","changeDestination","destination","monster"],"mappings":"AAAA,OAAOA,EAAP,MAAe,kBAAf;AACA,IAAIC,MAAM,GAAG,IAAb,C,CAEA;;AACA,MAAMC,UAAU,GACdC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,GAAxC,GAA8C,uBADhD;AAGA,OAAO,SAASC,WAAT,CAAqBC,MAArB,EAA6B;AAClC;AACA;AACAN,EAAAA,MAAM,GAAGD,EAAE,CAACE,UAAD,CAAX;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BP,UAA7B;AACAD,EAAAA,MAAM,CAACS,EAAP,CAAU,SAAV,EAAqB,MAAM;AACzBF,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACD,GAFD;;AAGA,MAAIR,MAAM,IAAIM,MAAd,EAAsB;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCF,MAArC;AACAN,IAAAA,MAAM,CAACU,IAAP,CAAY,MAAZ,EAAoBJ,MAApB;AACD;AACF;AAED,OAAO,SAASK,UAAT,GAAsB;AAC3B,MAAI,CAACX,MAAL,EAAa;AACbO,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAR,EAAAA,MAAM,CAACW,UAAP;AACD;AAED,OAAO,SAASC,SAAT,CAAmBC,OAAnB,EAA4B;AACjC,MAAI,CAACb,MAAL,EAAa;AACbO,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAR,EAAAA,MAAM,CAACS,EAAP,CAAU,YAAV,EAAwBI,OAAxB;AACD;AAED,OAAO,SAASC,iBAAT,CAA2BR,MAA3B,EAAmCS,WAAnC,EAAgD;AACrD,MAAI,CAACf,MAAL,EAAa;AACbO,EAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACA,MAAIQ,OAAO,GAAG;AACZD,IAAAA,WADY,CAEZ;AACA;;AAHY,GAAd;AAKAf,EAAAA,MAAM,CAACU,IAAP,CAAY,mBAAZ,EAAiC;AAAEJ,IAAAA,MAAF;AAAUU,IAAAA;AAAV,GAAjC;AACD","sourcesContent":["import io from \"socket.io-client\";\nlet socket = null;\n\n// temp\nconst SOCKET_URL =\n  process.env.NODE_ENV === \"production\" ? \"/\" : \"http://localhost:5001\";\n\nexport function initAndJoin(roomId) {\n  // https://stackoverflow.com/questions/44628363/socket-io-access-control-allow-origin-error/64805972\n  // socket = io(SOCKET_URL, { transports: [\"websocket\"] });\n  socket = io(SOCKET_URL);\n  console.log(\"[socket] init\", SOCKET_URL);\n  socket.on(\"connect\", () => {\n    console.log(\"[socket] connect\");\n  });\n  if (socket && roomId) {\n    console.log(\"[socket] join: roomId\", roomId);\n    socket.emit(\"join\", roomId);\n  }\n}\n\nexport function disconnect() {\n  if (!socket) return;\n  console.log(\"[socket] disconnect\");\n  socket.disconnect();\n}\n\nexport function subscribe(handler) {\n  if (!socket) return;\n  console.log(\"[socket] fieldState\");\n  socket.on(\"fieldState\", handler);\n}\n\nexport function changeDestination(roomId, destination) {\n  if (!socket) return;\n  console.log(\"[socket] changeDestination\");\n  let monster = {\n    destination,\n    // temp\n    // location: destination,\n  };\n  socket.emit(\"changeDestination\", { roomId, monster });\n}\n"]},"metadata":{},"sourceType":"module"}