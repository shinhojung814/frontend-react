{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/NewAlien/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as actions from \"../../Redux/actions\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport styles from \"./index.module.css\";\nimport api from \"../../apis\";\nimport AlienSlide from \"./AlienSlide\";\nimport AlienInfo from \"./AlienInfo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewAlien(props) {\n  _s();\n\n  const {\n    challengeId\n  } = useParams();\n  const {\n    user\n  } = useSelector(({\n    user\n  }) => ({\n    user: user.user\n  }));\n  let dispatch = useDispatch(); // 링크 이동\n\n  const navigate = useNavigate(); // console.log(\"New Challenge params\", params);\n\n  const [authCount, setAuthCount] = useState(\"\"); // 생명체 정보\n\n  const [alienName, setAlienName] = useState(\"\");\n  const [alienNumber, setAlienNumber] = useState(0); // 인증 요일\n\n  const [checkDay, setCheckDay] = useState([]);\n  const [sun, setSun] = useState(0);\n  const [mon, setMon] = useState(0);\n  const [tue, setTue] = useState(0);\n  const [wed, setWed] = useState(0);\n  const [thu, setThu] = useState(0);\n  const [fri, setFri] = useState(0);\n  const [sat, setSat] = useState(0); // validation\n\n  const [creAlienMessage, setCreAlienMessage] = useState(null); // TODO: login 상태일 때만 접근할 수 있음\n  // TODO: 챌린지에 접근 가능한 유저인지 확인해주어야 함\n  // 기본 생명체 번호 계산\n\n  let aNumber = alienNumber;\n\n  if (aNumber >= 0) {\n    aNumber = -aNumber % 8;\n\n    while (aNumber < 0) {\n      aNumber += 8;\n    }\n\n    if (aNumber === -0) {\n      aNumber = 0;\n    }\n  } else {\n    aNumber = -aNumber;\n    aNumber %= 8;\n\n    while (aNumber < 0) {\n      aNumber += 8;\n    }\n  }\n\n  useEffect(() => {\n    // cntOfWeek\n    try {\n      const getChalData = async () => {\n        // 본 챌린지에 참가중인지 확인\n        let participating;\n\n        if (user.login && user.challenges) {\n          participating = user.challenges.findIndex(c => c.id === Number(challengeId)) !== -1;\n        }\n\n        if (!user.login || participating) return;\n        let res = await api.get(`/challenge/totalAuthCnt/${challengeId}`);\n\n        if (res.data.result === \"success\") {\n          setAuthCount(res.data.cntOfWeek);\n        } else {// TODO: 실패 케이스 처리\n        }\n      };\n\n      getChalData();\n    } catch (err) {\n      console.error(\"fetchData fail\", err);\n    }\n  }, [challengeId]); // 인증 요일\n\n  useEffect(() => {\n    if (checkDay.includes(\"sun\")) setSun(1);\n    if (checkDay.includes(\"mon\")) setMon(1);\n    if (checkDay.includes(\"tue\")) setTue(1);\n    if (checkDay.includes(\"wed\")) setWed(1);\n    if (checkDay.includes(\"thu\")) setThu(1);\n    if (checkDay.includes(\"fri\")) setFri(1);\n    if (checkDay.includes(\"sat\")) setSat(1);\n  }, [checkDay]);\n\n  function validateCreAlien(alienName, checkDay, authCount) {\n    if (!alienName) {\n      setCreAlienMessage(\"생명체 이름을 지어주세요!\");\n      return false;\n    }\n\n    if (!checkDay.length) {\n      setCreAlienMessage(\"인증 요일을 선택해주세요!\");\n      return false;\n    } // console.log(111, checkDay.length);\n    // console.log(221, authCount);\n\n\n    if (checkDay.length !== authCount) {\n      setCreAlienMessage(\"인증 횟수를 확인해주세요!\");\n      return false;\n    }\n\n    setCreAlienMessage(null);\n    return true;\n  } // 생명체 생성 event\n\n\n  const handleSubmit = e => {\n    // e.preventDefault();\n    if (!validateCreAlien(alienName, checkDay, authCount)) return; // console.log(\"alienNumber:\", alienNumber);\n\n    postCreateAlien();\n  };\n\n  const postCreateAlien = async () => {\n    let createAlienData = {\n      challenge_id: challengeId,\n      alien_name: alienName,\n      image_url: aNumber,\n      total_auth_cnt: authCount,\n      sun: sun,\n      mon: mon,\n      tue: tue,\n      wed: wed,\n      thu: thu,\n      fri: fri,\n      sat: sat\n    };\n    const res = await api.post(\"/alien/create\", createAlienData);\n\n    if (res.data.result === \"success\") {\n      // console.log(\"/alien/create\", res);\n      // TODO: challenge 정보를 user 정보에 추가\n      dispatch(actions.joinChallenge({\n        id: parseInt(challengeId)\n      }));\n      alert(\"생명체 생성을 성공하였습니다!\");\n      navigate(`/challenge/${challengeId}/room`);\n    } else {\n      alert(\"생명체 생성에 실패했습니다.\");\n    }\n  }; // console.log(\"checkDay\", checkDay); // log 2번 찍힘\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.body,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container w-2/5 min-w-max\",\n      children: [/*#__PURE__*/_jsxDEV(AlienInfo, {\n        setAlienName: setAlienName,\n        authCount: authCount,\n        checkDay: checkDay,\n        setCheckDay: setCheckDay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" container top-60 border-gray-500 w-1/2 px-3 py-3 mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"relative px-1 py-1 inline-flex min-w-max\",\n          children: /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \" mr-1 inline-block \",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"bg-white inline-block border-l border-t border-r rounded-t py-2 px-4 text-blue-700 font-semibold\",\n              children: \"\\uCE90\\uB9AD\\uD130 \\uC120\\uD0DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border p-5 md:p-10 w-full min-w-max\",\n          children: /*#__PURE__*/_jsxDEV(AlienSlide, {\n            alienNumber: alienNumber,\n            setAlienNumber: setAlienNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pb-3 px-3 text-red-500 font-semibold text-center\",\n        children: creAlienMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center pb-5\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"border py-1 px-3 rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 font-semibold\",\n          onClick: handleSubmit,\n          children: \"\\uC0DD\\uBA85\\uCCB4 \\uC0DD\\uC131\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewAlien, \"bc68LCZbnkS4SvT2TV6qGlKo1d0=\", false, function () {\n  return [useParams, useSelector, useDispatch, useNavigate];\n});\n\n_c = NewAlien;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewAlien\");","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/NewAlien/index.js"],"names":["React","useState","useEffect","useDispatch","useSelector","actions","useParams","useNavigate","styles","api","AlienSlide","AlienInfo","NewAlien","props","challengeId","user","dispatch","navigate","authCount","setAuthCount","alienName","setAlienName","alienNumber","setAlienNumber","checkDay","setCheckDay","sun","setSun","mon","setMon","tue","setTue","wed","setWed","thu","setThu","fri","setFri","sat","setSat","creAlienMessage","setCreAlienMessage","aNumber","getChalData","participating","login","challenges","findIndex","c","id","Number","res","get","data","result","cntOfWeek","err","console","error","includes","validateCreAlien","length","handleSubmit","e","postCreateAlien","createAlienData","challenge_id","alien_name","image_url","total_auth_cnt","post","joinChallenge","parseInt","alert","body"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as actions from \"../../Redux/actions\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport styles from \"./index.module.css\";\nimport api from \"../../apis\";\nimport AlienSlide from \"./AlienSlide\";\nimport AlienInfo from \"./AlienInfo\";\n\nexport default function NewAlien(props) {\n  const { challengeId } = useParams();\n  const { user } = useSelector(({ user }) => ({ user: user.user }));\n  let dispatch = useDispatch();\n  // 링크 이동\n  const navigate = useNavigate();\n\n  // console.log(\"New Challenge params\", params);\n  const [authCount, setAuthCount] = useState(\"\");\n  // 생명체 정보\n  const [alienName, setAlienName] = useState(\"\");\n  const [alienNumber, setAlienNumber] = useState(0);\n  // 인증 요일\n  const [checkDay, setCheckDay] = useState([]);\n  const [sun, setSun] = useState(0);\n  const [mon, setMon] = useState(0);\n  const [tue, setTue] = useState(0);\n  const [wed, setWed] = useState(0);\n  const [thu, setThu] = useState(0);\n  const [fri, setFri] = useState(0);\n  const [sat, setSat] = useState(0);\n  // validation\n  const [creAlienMessage, setCreAlienMessage] = useState(null);\n\n  // TODO: login 상태일 때만 접근할 수 있음\n  // TODO: 챌린지에 접근 가능한 유저인지 확인해주어야 함\n\n  // 기본 생명체 번호 계산\n  let aNumber = alienNumber;\n  if (aNumber >= 0) {\n    aNumber = -aNumber % 8;\n    while (aNumber < 0) {\n      aNumber += 8;\n    }\n    if (aNumber === -0) {\n      aNumber = 0;\n    }\n  } else {\n    aNumber = -aNumber;\n    aNumber %= 8;\n    while (aNumber < 0) {\n      aNumber += 8;\n    }\n  }\n\n  useEffect(() => {\n    // cntOfWeek\n    try {\n      const getChalData = async () => {\n        // 본 챌린지에 참가중인지 확인\n        let participating;\n        if (user.login && user.challenges) {\n          participating =\n            user.challenges.findIndex((c) => c.id === Number(challengeId)) !==\n            -1;\n        }\n        if (!user.login || participating) return;\n        let res = await api.get(`/challenge/totalAuthCnt/${challengeId}`);\n        if (res.data.result === \"success\") {\n          setAuthCount(res.data.cntOfWeek);\n        } else {\n          // TODO: 실패 케이스 처리\n        }\n      };\n      getChalData();\n    } catch (err) {\n      console.error(\"fetchData fail\", err);\n    }\n  }, [challengeId]);\n\n  // 인증 요일\n  useEffect(() => {\n    if (checkDay.includes(\"sun\")) setSun(1);\n    if (checkDay.includes(\"mon\")) setMon(1);\n    if (checkDay.includes(\"tue\")) setTue(1);\n    if (checkDay.includes(\"wed\")) setWed(1);\n    if (checkDay.includes(\"thu\")) setThu(1);\n    if (checkDay.includes(\"fri\")) setFri(1);\n    if (checkDay.includes(\"sat\")) setSat(1);\n  }, [checkDay]);\n\n  function validateCreAlien(alienName, checkDay, authCount) {\n    if (!alienName) {\n      setCreAlienMessage(\"생명체 이름을 지어주세요!\");\n      return false;\n    }\n    if (!checkDay.length) {\n      setCreAlienMessage(\"인증 요일을 선택해주세요!\");\n      return false;\n    }\n    // console.log(111, checkDay.length);\n    // console.log(221, authCount);\n    if (checkDay.length !== authCount) {\n      setCreAlienMessage(\"인증 횟수를 확인해주세요!\");\n      return false;\n    }\n    setCreAlienMessage(null);\n    return true;\n  }\n\n  // 생명체 생성 event\n  const handleSubmit = (e) => {\n    // e.preventDefault();\n    if (!validateCreAlien(alienName, checkDay, authCount)) return;\n    // console.log(\"alienNumber:\", alienNumber);\n    postCreateAlien();\n  };\n\n  const postCreateAlien = async () => {\n    let createAlienData = {\n      challenge_id: challengeId,\n      alien_name: alienName,\n      image_url: aNumber,\n      total_auth_cnt: authCount,\n      sun: sun,\n      mon: mon,\n      tue: tue,\n      wed: wed,\n      thu: thu,\n      fri: fri,\n      sat: sat,\n    };\n    const res = await api.post(\"/alien/create\", createAlienData);\n    if (res.data.result === \"success\") {\n      // console.log(\"/alien/create\", res);\n      // TODO: challenge 정보를 user 정보에 추가\n      dispatch(actions.joinChallenge({ id: parseInt(challengeId) }));\n      alert(\"생명체 생성을 성공하였습니다!\");\n      navigate(`/challenge/${challengeId}/room`);\n    } else {\n      alert(\"생명체 생성에 실패했습니다.\");\n    }\n  };\n\n  // console.log(\"checkDay\", checkDay); // log 2번 찍힘\n  return (\n    <div className={styles.body}>\n      <div className=\"container w-2/5 min-w-max\">\n        <AlienInfo\n          setAlienName={setAlienName}\n          authCount={authCount}\n          checkDay={checkDay}\n          setCheckDay={setCheckDay}\n        />\n\n        <div className=\" container top-60 border-gray-500 w-1/2 px-3 py-3 mb-3\">\n          <ul className=\"relative px-1 py-1 inline-flex min-w-max\">\n            <li className=\" mr-1 inline-block \">\n              <a className=\"bg-white inline-block border-l border-t border-r rounded-t py-2 px-4 text-blue-700 font-semibold\">\n                캐릭터 선택\n              </a>\n            </li>\n            {/* <li className=\"mr-1 inline-block\">\n              <a className=\"bg-white inline-block py-2 px-4 text-blue-500  font-semibold\">\n                꾸미기\n              </a>\n            </li> */}\n          </ul>\n          <div className=\"border p-5 md:p-10 w-full min-w-max\">\n            <AlienSlide\n              alienNumber={alienNumber}\n              setAlienNumber={setAlienNumber}\n            />\n          </div>\n        </div>\n        <div className=\"pb-3 px-3 text-red-500 font-semibold text-center\">\n          {creAlienMessage}\n        </div>\n        <div className=\"flex justify-center pb-5\">\n          <button\n            className=\"border py-1 px-3 rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 font-semibold\"\n            onClick={handleSubmit}\n          >\n            생명체 생성\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}