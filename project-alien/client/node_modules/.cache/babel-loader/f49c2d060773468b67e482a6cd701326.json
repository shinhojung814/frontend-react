{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/MultiField/index.js\";\nimport React, { Component } from \"react\";\nimport Canvas from \"../../../components/Canvas\";\nimport * as socket from \"../../../apis/socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Field extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.resizeEventHandler = e => {\n      this.stageWidth = window.innerWidth || document.body.clientWidth;\n      this.stageHeight = window.innerHeight || document.body.clientHeight;\n    };\n\n    this.draw = (ctx, frameCnt, mouseObj) => {\n      // console.log(mouseObj);\n      let cvsWidth = ctx.canvas.width;\n      let cvsHeight = ctx.canvas.height;\n      ctx.save();\n      ctx.clearRect(0, 0, cvsWidth, cvsHeight); // translate location\n\n      ctx.translate(cvsWidth / 2, cvsHeight / 2); // draw background\n\n      ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n      ctx.fillRect(0, 0, cvsWidth, cvsHeight); // draw monster\n\n      if (this.props.room && this.props.room.fieldState) {\n        const room = this.props.room;\n        const {\n          monsters\n        } = room.fieldState; // TODO: monster들의 순서 (누가 위에 놓일 것인지 여부) 처리 필요\n\n        for (const userId in monsters) {\n          let {\n            location,\n            size,\n            color\n          } = monsters[userId];\n          let x = room.camera.getCanvasSize(location.x);\n          let y = room.camera.getCanvasSize(location.y);\n          size = room.camera.getCanvasSize(size);\n          ctx.beginPath();\n          ctx.arc(x, y, size / 2, 0, Math.PI * 2);\n          ctx.fillStyle = color;\n          ctx.fill();\n        }\n\n        if (mouseObj.clicked) {\n          const destination = {\n            x: mouseObj.deltaXfromCenter,\n            y: mouseObj.deltaYfromCenter\n          };\n          socket.changeDestination(room.roomId, destination);\n        }\n      }\n\n      ctx.restore();\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resizeEventHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resizeEventHandler);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Canvas, {\n      draw: this.draw\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 12\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/MultiField/index.js"],"names":["React","Component","Canvas","socket","Field","resizeEventHandler","e","stageWidth","window","innerWidth","document","body","clientWidth","stageHeight","innerHeight","clientHeight","draw","ctx","frameCnt","mouseObj","cvsWidth","canvas","width","cvsHeight","height","save","clearRect","translate","fillStyle","fillRect","props","room","fieldState","monsters","userId","location","size","color","x","camera","getCanvasSize","y","beginPath","arc","Math","PI","fill","clicked","destination","deltaXfromCenter","deltaYfromCenter","changeDestination","roomId","restore","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Canvas from \"../../../components/Canvas\";\n\nimport * as socket from \"../../../apis/socket\";\n\nexport default class Field extends Component {\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resizeEventHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resizeEventHandler);\n  }\n\n  resizeEventHandler = (e) => {\n    this.stageWidth = window.innerWidth || document.body.clientWidth;\n    this.stageHeight = window.innerHeight || document.body.clientHeight;\n  };\n\n  draw = (ctx, frameCnt, mouseObj) => {\n    // console.log(mouseObj);\n    let cvsWidth = ctx.canvas.width;\n    let cvsHeight = ctx.canvas.height;\n    ctx.save();\n    ctx.clearRect(0, 0, cvsWidth, cvsHeight);\n\n    // translate location\n    ctx.translate(cvsWidth / 2, cvsHeight / 2);\n\n    // draw background\n    ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n    ctx.fillRect(0, 0, cvsWidth, cvsHeight);\n\n    // draw monster\n    if (this.props.room && this.props.room.fieldState) {\n      const room = this.props.room;\n      const { monsters } = room.fieldState;\n      // TODO: monster들의 순서 (누가 위에 놓일 것인지 여부) 처리 필요\n      for (const userId in monsters) {\n        let { location, size, color } = monsters[userId];\n        let x = room.camera.getCanvasSize(location.x);\n        let y = room.camera.getCanvasSize(location.y);\n        size = room.camera.getCanvasSize(size);\n        ctx.beginPath();\n        ctx.arc(x, y, size / 2, 0, Math.PI * 2);\n        ctx.fillStyle = color;\n        ctx.fill();\n      }\n\n      if (mouseObj.clicked) {\n        const destination = {\n          x: mouseObj.deltaXfromCenter,\n          y: mouseObj.deltaYfromCenter,\n        };\n        socket.changeDestination(room.roomId, destination);\n      }\n    }\n\n    ctx.restore();\n  };\n\n  render() {\n    return <Canvas draw={this.draw} />;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}