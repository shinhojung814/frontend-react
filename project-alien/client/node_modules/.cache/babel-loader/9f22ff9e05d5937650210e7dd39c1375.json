{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/MultiField/Canvas/index.js\";\nimport React, { Component } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Canvas extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onResize = event => {\n      // console.log(\"canvas, onResize\");\n      this._cvs.width = window.innerWidth || document.body.clientWidth;\n      this._cvs.height = window.innerHeight || document.body.clientHeight;\n      if (this.props.onResize) this.props.onResize(this._cvs.width, this._cvs.height);\n    };\n\n    this.onMouseDown = e => {\n      this.setMouseLocal(e);\n      this.mouseObj.clicked = true;\n      this.mouseObj.clickedFrame = this._frameCnt;\n      if (this.props.onMouseDown) this.props.onMouseDown(e);\n    };\n\n    this.onMouseUp = e => {\n      if (this.props.onMouseUp) this.props.onMouseUp(e);\n    };\n\n    this.onMouseMove = e => {\n      this.setMouseLocal(e);\n      this.mouseObj.isMouseMoving = true;\n      if (this.props.onMouseMove) this.props.onMouseMove(e);\n    };\n\n    this.onTouchStart = e => {\n      this.setTouchLocal(e);\n      this.mouseObj.clicked = true;\n      this.mouseObj.clickedFrame = this._frameCnt;\n      if (this.props.onTouchStart) this.props.onTouchStart(e);\n    };\n\n    this.onTouchEnd = e => {\n      if (this.props.onTouchEnd) this.props.onTouchEnd(e);\n    };\n\n    this.onTouchMove = e => {\n      this.setTouchLocal(e);\n      this.mouseObj.isMouseMoving = true;\n      if (this.props.onTouchMove) this.props.onTouchMove(e);\n    };\n\n    this.onWheel = e => {\n      if (this.props.onWheel) this.props.onWheel(e);\n    };\n\n    this.resetMouseObj = () => {\n      this.mouseObj.isMouseMoving = false;\n      this.mouseObj.clicked = false;\n      this.mouseObj.clickedFrame = undefined;\n    };\n\n    this.setMouseLocal = event => {\n      // https://stackoverflow.com/questions/17130395/real-mouse-position-in-canvas\n      let rect = this._cvs.getBoundingClientRect();\n\n      let borderWidth = 0; // temp\n\n      let scaleX = this._cvs.width / (rect.width - borderWidth * 2);\n      let scaleY = this._cvs.height / (rect.height - borderWidth * 2);\n      let mouseX = (event.clientX - (rect.left + borderWidth)) * scaleX;\n      let mouseY = (event.clientY - (rect.top + borderWidth)) * scaleY;\n      let padding = 10;\n      let isMouseOverCanvas = mouseX >= padding && mouseX <= this._cvs.width - padding && mouseY >= padding && mouseY <= this._cvs.height - padding;\n      this.mouseObj.mouseX = mouseX;\n      this.mouseObj.mouseY = mouseY;\n      this.mouseObj.isMouseOverCanvas = isMouseOverCanvas;\n      this.mouseObj.deltaXfromCenter = mouseX - this._cvs.width / 2;\n      this.mouseObj.deltaYfromCenter = mouseY - this._cvs.height / 2;\n      return {\n        mouseX,\n        mouseY,\n        isMouseOverCanvas\n      };\n    };\n\n    this.setTouchLocal = e => {\n      if (e.touches.length <= 1) {\n        this.setMouseLocal(e.touches[0]);\n      } else if (e.type === \"touchmove\" && e.touches.length === 2) {// TODO: touch가 2개 이상일 때에 대한 처리\n      }\n    };\n\n    this.loop = () => {\n      this._frameCnt += 1;\n      let {\n        draw,\n        isLooped = true\n      } = this.props;\n      draw(this._ctx, this._frameCnt, this.mouseObj);\n      this.resetMouseObj();\n\n      if (isLooped) {\n        this._frameId = window.requestAnimationFrame(this.loop);\n      }\n    };\n\n    this.canvasRef = /*#__PURE__*/React.createRef();\n    this.mouseObj = {\n      mouseX: undefined,\n      mouseY: undefined,\n      isMouseOverCanvas: false,\n      isMouseMoving: false,\n      clicked: false,\n      clickedFrame: undefined\n    };\n  }\n\n  componentDidMount() {\n    if (!this._frameId) {\n      // initiate properties\n      this._cvs = this.canvasRef.current;\n      this._ctx = this._cvs.getContext(\"2d\");\n      this._frameCnt = 0; // to pan and zoom map\n      // https://codepen.io/chengarda/pen/wRxoyB?editors=0110\n\n      this._cvs.addEventListener(\"mousedown\", this.onMouseDown);\n\n      window.addEventListener(\"mousemove\", this.onMouseMove);\n      window.addEventListener(\"mouseup\", this.onMouseUp);\n\n      this._cvs.addEventListener(\"touchstart\", this.onTouchStart);\n\n      window.addEventListener(\"touchmove\", this.onTouchMove);\n      window.addEventListener(\"touchend\", this.onTouchEnd);\n\n      this._cvs.addEventListener(\"wheel\", this.onWheel); // start loop\n      // console.log(\"start loop\");\n\n\n      this.loop();\n    }\n\n    window.addEventListener(\"resize\", this.onResize);\n    this.onResize();\n  }\n\n  componentWillUnmount() {\n    // console.log(\"cancel loop\");\n    window.cancelAnimationFrame(this._frameId);\n    window.removeEventListener(\"resize\", this.onResize);\n\n    if (this._cvs) {\n      this._cvs.removeEventListener(\"mousedown\", this.onMouseDown);\n\n      window.removeEventListener(\"mousemove\", this.onMouseMove);\n      window.removeEventListener(\"mouseup\", this.onMouseUp);\n\n      this._cvs.removeEventListener(\"touchstart\", this.onTouchStart);\n\n      window.removeEventListener(\"touchmove\", this.onTouchMove);\n      window.removeEventListener(\"touchend\", this.onTouchEnd);\n\n      this._cvs.removeEventListener(\"wheel\", this.onWheel);\n    }\n  }\n\n  render() {\n    let {\n      width = 300,\n      height = 300\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: this.canvasRef,\n      width: width,\n      height: height,\n      style: {\n        display: \"block\" // border: \"1px solid black\"\n\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/MultiField/Canvas/index.js"],"names":["React","Component","Canvas","constructor","props","onResize","event","_cvs","width","window","innerWidth","document","body","clientWidth","height","innerHeight","clientHeight","onMouseDown","e","setMouseLocal","mouseObj","clicked","clickedFrame","_frameCnt","onMouseUp","onMouseMove","isMouseMoving","onTouchStart","setTouchLocal","onTouchEnd","onTouchMove","onWheel","resetMouseObj","undefined","rect","getBoundingClientRect","borderWidth","scaleX","scaleY","mouseX","clientX","left","mouseY","clientY","top","padding","isMouseOverCanvas","deltaXfromCenter","deltaYfromCenter","touches","length","type","loop","draw","isLooped","_ctx","_frameId","requestAnimationFrame","canvasRef","createRef","componentDidMount","current","getContext","addEventListener","componentWillUnmount","cancelAnimationFrame","removeEventListener","render","display"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nexport default class Canvas extends Component {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n    this.mouseObj = {\n      mouseX: undefined,\n      mouseY: undefined,\n      isMouseOverCanvas: false,\n      isMouseMoving: false,\n      clicked: false,\n      clickedFrame: undefined,\n    };\n  }\n\n  componentDidMount() {\n    if (!this._frameId) {\n      // initiate properties\n      this._cvs = this.canvasRef.current;\n      this._ctx = this._cvs.getContext(\"2d\");\n      this._frameCnt = 0;\n      // to pan and zoom map\n      // https://codepen.io/chengarda/pen/wRxoyB?editors=0110\n      this._cvs.addEventListener(\"mousedown\", this.onMouseDown);\n      window.addEventListener(\"mousemove\", this.onMouseMove);\n      window.addEventListener(\"mouseup\", this.onMouseUp);\n\n      this._cvs.addEventListener(\"touchstart\", this.onTouchStart);\n      window.addEventListener(\"touchmove\", this.onTouchMove);\n      window.addEventListener(\"touchend\", this.onTouchEnd);\n      this._cvs.addEventListener(\"wheel\", this.onWheel);\n\n      // start loop\n      // console.log(\"start loop\");\n      this.loop();\n    }\n    window.addEventListener(\"resize\", this.onResize);\n    this.onResize();\n  }\n\n  componentWillUnmount() {\n    // console.log(\"cancel loop\");\n    window.cancelAnimationFrame(this._frameId);\n    window.removeEventListener(\"resize\", this.onResize);\n    if (this._cvs) {\n      this._cvs.removeEventListener(\"mousedown\", this.onMouseDown);\n      window.removeEventListener(\"mousemove\", this.onMouseMove);\n      window.removeEventListener(\"mouseup\", this.onMouseUp);\n\n      this._cvs.removeEventListener(\"touchstart\", this.onTouchStart);\n      window.removeEventListener(\"touchmove\", this.onTouchMove);\n      window.removeEventListener(\"touchend\", this.onTouchEnd);\n\n      this._cvs.removeEventListener(\"wheel\", this.onWheel);\n    }\n  }\n\n  onResize = (event) => {\n    // console.log(\"canvas, onResize\");\n    this._cvs.width = window.innerWidth || document.body.clientWidth;\n    this._cvs.height = window.innerHeight || document.body.clientHeight;\n    if (this.props.onResize)\n      this.props.onResize(this._cvs.width, this._cvs.height);\n  };\n\n  onMouseDown = (e) => {\n    this.setMouseLocal(e);\n    this.mouseObj.clicked = true;\n    this.mouseObj.clickedFrame = this._frameCnt;\n    if (this.props.onMouseDown) this.props.onMouseDown(e);\n  };\n\n  onMouseUp = (e) => {\n    if (this.props.onMouseUp) this.props.onMouseUp(e);\n  };\n\n  onMouseMove = (e) => {\n    this.setMouseLocal(e);\n    this.mouseObj.isMouseMoving = true;\n    if (this.props.onMouseMove) this.props.onMouseMove(e);\n  };\n\n  onTouchStart = (e) => {\n    this.setTouchLocal(e);\n    this.mouseObj.clicked = true;\n    this.mouseObj.clickedFrame = this._frameCnt;\n    if (this.props.onTouchStart) this.props.onTouchStart(e);\n  };\n\n  onTouchEnd = (e) => {\n    if (this.props.onTouchEnd) this.props.onTouchEnd(e);\n  };\n\n  onTouchMove = (e) => {\n    this.setTouchLocal(e);\n    this.mouseObj.isMouseMoving = true;\n    if (this.props.onTouchMove) this.props.onTouchMove(e);\n  };\n\n  onWheel = (e) => {\n    if (this.props.onWheel) this.props.onWheel(e);\n  };\n\n  resetMouseObj = () => {\n    this.mouseObj.isMouseMoving = false;\n    this.mouseObj.clicked = false;\n    this.mouseObj.clickedFrame = undefined;\n  };\n\n  setMouseLocal = (event) => {\n    // https://stackoverflow.com/questions/17130395/real-mouse-position-in-canvas\n    let rect = this._cvs.getBoundingClientRect();\n    let borderWidth = 0; // temp\n\n    let scaleX = this._cvs.width / (rect.width - borderWidth * 2);\n    let scaleY = this._cvs.height / (rect.height - borderWidth * 2);\n\n    let mouseX = (event.clientX - (rect.left + borderWidth)) * scaleX;\n    let mouseY = (event.clientY - (rect.top + borderWidth)) * scaleY;\n\n    let padding = 10;\n    let isMouseOverCanvas =\n      mouseX >= padding &&\n      mouseX <= this._cvs.width - padding &&\n      mouseY >= padding &&\n      mouseY <= this._cvs.height - padding;\n\n    this.mouseObj.mouseX = mouseX;\n    this.mouseObj.mouseY = mouseY;\n    this.mouseObj.isMouseOverCanvas = isMouseOverCanvas;\n\n    this.mouseObj.deltaXfromCenter = mouseX - this._cvs.width / 2;\n    this.mouseObj.deltaYfromCenter = mouseY - this._cvs.height / 2;\n\n    return {\n      mouseX,\n      mouseY,\n      isMouseOverCanvas,\n    };\n  };\n\n  setTouchLocal = (e) => {\n    if (e.touches.length <= 1) {\n      this.setMouseLocal(e.touches[0]);\n    } else if (e.type === \"touchmove\" && e.touches.length === 2) {\n      // TODO: touch가 2개 이상일 때에 대한 처리\n    }\n  };\n\n  loop = () => {\n    this._frameCnt += 1;\n    let { draw, isLooped = true } = this.props;\n    draw(this._ctx, this._frameCnt, this.mouseObj);\n    this.resetMouseObj();\n    if (isLooped) {\n      this._frameId = window.requestAnimationFrame(this.loop);\n    }\n  };\n\n  render() {\n    let { width = 300, height = 300 } = this.props;\n    return (\n      <canvas\n        ref={this.canvasRef}\n        width={width}\n        height={height}\n        style={{\n          display: \"block\",\n          // border: \"1px solid black\"\n        }}\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}