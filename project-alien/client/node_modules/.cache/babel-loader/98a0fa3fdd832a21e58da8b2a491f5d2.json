{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/ListCtrl/SideBarModal2/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./SideBarModal2.css\";\nimport { useSelector } from \"react-redux\";\nimport api from \"../../../../apis/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function SideBarModal2() {\n  _s();\n\n  // console.log(\"alien밖: \", alien);\n  const showModal2 = useSelector(state => state.modalOnOff.showModal2);\n  const alien = useSelector(state => state.alien_auth_func.alien_auth);\n  const [authImage, setAuthImage] = useState(null);\n  const [authMessage, setAuthMessage] = useState(\"\"); // console.log(\"authImage\", authImage);\n  // console.log(\"authMessage\", authMessage);\n\n  const handleSubmit = async e => {\n    // console.log(\"alien안: \", alien);\n    // console.log(\"alien안_id: \", alien.alien.id);\n    e.preventDefault();\n    const res = await api.get(\"/main/s3Url\");\n    console.log(\"url\", res.data.url);\n    const {\n      url\n    } = res.data;\n    console.log(url); // post the image direclty to the s3 bucket\n\n    if (authImage) {\n      await fetch(url, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        body: authImage[0]\n      });\n    }\n\n    const imageUrl = url.split(\"?\")[0];\n    console.log(imageUrl);\n    console.log(\"문자적자\", alien.alien.user_info_id);\n    const resp = {\n      user_info_id: alien.alien.user_info_id,\n      Alien_id: alien.alien.id,\n      Challenge_id: alien.alien.Challenge_id,\n      comment: authMessage,\n      image_url: imageUrl\n    }; // // dummy test용\n    // const resp = {\n    //   user_info_id: 1,\n    //   Alien_id: 1,\n    //   Challenge_id: 1,\n    //   requestUserNickname: \"John\",\n    //   comment: authMessage,\n    //   imgURL: imageUrl,\n    // };\n    // post requst to my server to store any extra data\n\n    const result = await api.post(\"/challenge/auth\", resp);\n    console.log(result);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: showModal2 ? \"ModalContainer2\" : \"hidden2\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          id: \"imageForm\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC778\\uC99D\\uD558\\uAE30 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            type: \"text\",\n            placeholder: \"Comment\",\n            onChange: e => {\n              setAuthMessage(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"imageInput\",\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => {\n              setAuthImage(e.target.files);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleSubmit,\n            children: \"\\uC0AC\\uC9C4 \\uC5C5\\uB85C\\uB4DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(SideBarModal2, \"2AQDM6SGCIhq13Q0oH2zTGenHxs=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = SideBarModal2;\n\nvar _c;\n\n$RefreshReg$(_c, \"SideBarModal2\");","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/ListCtrl/SideBarModal2/index.js"],"names":["React","useState","useSelector","api","SideBarModal2","showModal2","state","modalOnOff","alien","alien_auth_func","alien_auth","authImage","setAuthImage","authMessage","setAuthMessage","handleSubmit","e","preventDefault","res","get","console","log","data","url","fetch","method","headers","body","imageUrl","split","user_info_id","resp","Alien_id","id","Challenge_id","comment","image_url","result","post","target","value","files"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport \"./SideBarModal2.css\";\nimport { useSelector } from \"react-redux\";\nimport api from \"../../../../apis/index\";\n\nexport default function SideBarModal2() {\n  // console.log(\"alien밖: \", alien);\n  const showModal2 = useSelector((state) => state.modalOnOff.showModal2);\n  const alien = useSelector((state) => state.alien_auth_func.alien_auth);\n  const [authImage, setAuthImage] = useState(null);\n  const [authMessage, setAuthMessage] = useState(\"\");\n\n  // console.log(\"authImage\", authImage);\n  // console.log(\"authMessage\", authMessage);\n\n  const handleSubmit = async (e) => {\n    // console.log(\"alien안: \", alien);\n    // console.log(\"alien안_id: \", alien.alien.id);\n    e.preventDefault();\n    const res = await api.get(\"/main/s3Url\");\n    console.log(\"url\", res.data.url);\n    const { url } = res.data;\n    console.log(url);\n\n    // post the image direclty to the s3 bucket\n    if (authImage) {\n      await fetch(url, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n        body: authImage[0],\n      });\n    }\n    const imageUrl = url.split(\"?\")[0];\n    console.log(imageUrl);\n    console.log(\"문자적자\", alien.alien.user_info_id);\n    const resp = {\n      user_info_id: alien.alien.user_info_id,\n      Alien_id: alien.alien.id,\n      Challenge_id: alien.alien.Challenge_id,\n      comment: authMessage,\n      image_url: imageUrl,\n    };\n\n    // // dummy test용\n    // const resp = {\n    //   user_info_id: 1,\n    //   Alien_id: 1,\n    //   Challenge_id: 1,\n    //   requestUserNickname: \"John\",\n    //   comment: authMessage,\n    //   imgURL: imageUrl,\n    // };\n\n    // post requst to my server to store any extra data\n    const result = await api.post(\"/challenge/auth\", resp);\n    console.log(result);\n  };\n\n  return (\n    <>\n      {/* <div\n        className={showModal2 ? \"Background2\" : null}\n        onClick={() => {\n          dispatch(actions.showModal2(false));\n        }}\n      /> */}\n      <div>\n        <div className={showModal2 ? \"ModalContainer2\" : \"hidden2\"}>\n          <form id=\"imageForm\">\n            <p>인증하기 </p>\n            <textarea\n              type=\"text\"\n              placeholder=\"Comment\"\n              onChange={(e) => {\n                setAuthMessage(e.target.value);\n              }}\n            ></textarea>\n            <input\n              id=\"imageInput\"\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={(e) => {\n                setAuthImage(e.target.files);\n              }}\n            ></input>\n            <button type=\"button\" onClick={handleSubmit}>\n              사진 업로드\n            </button>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}