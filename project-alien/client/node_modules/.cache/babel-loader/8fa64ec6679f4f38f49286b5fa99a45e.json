{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport Room from \"./Room\";\nimport Header from \"./Header\";\nimport FieldCtrl from \"./FieldCtrl\";\nimport MultiField from \"./MultiField\";\nimport api from \"../../apis\";\nimport * as socket from \"../../apis/socket\"; // import background from \"./image/univ.jpg\";\n\nimport styles from \"./index.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MultiAquarium() {\n  _s();\n\n  const [roomIds, setRoomIds] = useState([]);\n  const [currRoomId, setCurrRoomId] = useState(null);\n  const rooms = useRef(); // 챌린지 정보 가져오기\n\n  useEffect(() => {\n    try {\n      const fetchData = async () => {\n        // const res = await api.get(\"/test\");\n        // console.log(\"fetch test data\", res.data);\n        // 서버에서 데이터를 받아온 상황을 전제로 구성\n        let roomIds = [1, 2, 3]; // rooms 상태 정보\n\n        rooms.current = {};\n        roomIds.forEach(roomId => {\n          rooms.current[roomId] = new Room(roomId);\n        }); // roomIds: react에서 state로 관리할 정보\n\n        setRoomIds(roomIds);\n        setCurrRoomId(roomIds[0]);\n        console.log(\"rooms\", rooms.current);\n      };\n\n      fetchData();\n    } catch (err) {\n      console.error(\"fetchData fail\", err);\n    }\n  }, []);\n  useEffect(() => {\n    // rooms가 생성되었는지 확인\n    if (!rooms.current || !currRoomId) return;\n    console.log(\"set currRoomId\", currRoomId);\n    socket.initAndJoin(currRoomId);\n    socket.subscribe(rooms.current[currRoomId].updateFieldState);\n    return () => {\n      socket.disconnect();\n    };\n  }, [currRoomId]);\n  console.log(\"[MultiAquarium] currRoomId\", currRoomId, rooms);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.body,\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.SecHead,\n      children: /*#__PURE__*/_jsxDEV(Header, {\n        rooms: roomIds,\n        roomId: currRoomId,\n        setRoomId: setCurrRoomId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.SecFieldCtrl,\n      children: /*#__PURE__*/_jsxDEV(FieldCtrl, {\n        room: rooms.current && rooms.current[currRoomId]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.SecField,\n      children: /*#__PURE__*/_jsxDEV(MultiField, {\n        room: rooms.current && rooms.current[currRoomId]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MultiAquarium, \"aGAiip9+yUePWyDqGNehyGXjnp4=\");\n\n_c = MultiAquarium;\n\nvar _c;\n\n$RefreshReg$(_c, \"MultiAquarium\");","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/index.js"],"names":["React","useState","useEffect","useRef","Room","Header","FieldCtrl","MultiField","api","socket","styles","MultiAquarium","roomIds","setRoomIds","currRoomId","setCurrRoomId","rooms","fetchData","current","forEach","roomId","console","log","err","error","initAndJoin","subscribe","updateFieldState","disconnect","body","SecHead","SecFieldCtrl","SecField"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\n\nimport Room from \"./Room\";\nimport Header from \"./Header\";\nimport FieldCtrl from \"./FieldCtrl\";\nimport MultiField from \"./MultiField\";\nimport api from \"../../apis\";\nimport * as socket from \"../../apis/socket\";\n// import background from \"./image/univ.jpg\";\nimport styles from \"./index.module.css\";\n\nexport default function MultiAquarium() {\n  const [roomIds, setRoomIds] = useState([]);\n  const [currRoomId, setCurrRoomId] = useState(null);\n  const rooms = useRef();\n\n  // 챌린지 정보 가져오기\n  useEffect(() => {\n    try {\n      const fetchData = async () => {\n        // const res = await api.get(\"/test\");\n        // console.log(\"fetch test data\", res.data);\n\n        // 서버에서 데이터를 받아온 상황을 전제로 구성\n        let roomIds = [1, 2, 3];\n\n        // rooms 상태 정보\n        rooms.current = {};\n        roomIds.forEach((roomId) => {\n          rooms.current[roomId] = new Room(roomId);\n        });\n\n        // roomIds: react에서 state로 관리할 정보\n        setRoomIds(roomIds);\n        setCurrRoomId(roomIds[0]);\n        console.log(\"rooms\", rooms.current);\n      };\n      fetchData();\n    } catch (err) {\n      console.error(\"fetchData fail\", err);\n    }\n  }, []);\n\n  useEffect(() => {\n    // rooms가 생성되었는지 확인\n    if (!rooms.current || !currRoomId) return;\n\n    console.log(\"set currRoomId\", currRoomId);\n    socket.initAndJoin(currRoomId);\n    socket.subscribe(rooms.current[currRoomId].updateFieldState);\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [currRoomId]);\n\n  console.log(\"[MultiAquarium] currRoomId\", currRoomId, rooms);\n  return (\n    <div className={styles.body}>\n      {/* <img src={background} alt=\"배경화면\"></img> */}\n      <section className={styles.SecHead}>\n        <Header rooms={roomIds} roomId={currRoomId} setRoomId={setCurrRoomId} />\n      </section>\n      <section className={styles.SecFieldCtrl}>\n        <FieldCtrl room={rooms.current && rooms.current[currRoomId]} />\n      </section>\n      <section className={styles.SecField}>\n        <MultiField room={rooms.current && rooms.current[currRoomId]} />\n      </section>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}