{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/Header/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Title from \"./Title\";\nimport SignInModal from \"./SignInModal\";\nimport SignUpModal from \"./SignUpModal\";\nimport AuthRequestModal from \"./AuthRequestModal\";\nimport * as actions from \"../../Redux/actions\";\nimport api from \"../../apis/index\";\nimport styles from \"./index.module.css\";\nimport classNames from \"classnames/bind\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cx = classNames.bind(styles);\nexport default function Header(props) {\n  _s();\n\n  // redux에서 user정보 받아오기\n  const {\n    user\n  } = useSelector(({\n    user\n  }) => ({\n    user: user.user\n  })); // const roomId = useSelector(({room}) =>({ roomId : room.roomId.roomId }))\n\n  const [signOutClicked, setSignOutClicked] = useState(false);\n  const dispatch = useDispatch();\n  const {\n    showSignUpModal,\n    showSignInModal\n  } = useSelector(({\n    modalOnOff\n  }) => ({\n    showSignUpModal: modalOnOff.showSignUpModal,\n    showSignInModal: modalOnOff.showSignInModal\n  }));\n\n  function switchSignUpModal() {\n    dispatch(actions.showSignInModal(false));\n    dispatch(actions.showSignUpModal(!showSignUpModal));\n  }\n\n  function switchSignInModal() {\n    dispatch(actions.showSignUpModal(false));\n    dispatch(actions.showSignInModal(!showSignInModal));\n  }\n\n  const navigate = useNavigate();\n\n  const handleLogout = async () => {\n    if (signOutClicked) return;\n    await api.get(\"/user/logout\");\n    setSignOutClicked(true);\n    dispatch(actions.logout());\n    navigate(\"/\");\n  }; // menu toggle\n\n\n  const [isMenuOn, setIsMenuOn] = useState(false);\n  useEffect(() => {\n    const getLoginStatus = async () => {\n      // 1단계: 로그인 상태 확인\n      let res = await api.get(\"/user/login/confirm\");\n      let user = res.data;\n\n      if (!res.data.login) {\n        dispatch(actions.checkUser(user)); // {login: false}\n\n        return;\n      }\n\n      user.challenges = []; // 2단계: 유저 관련 정보 확인 (참여중 챌린지 등)\n\n      res = await api.get(\"/user/challenges/ids\");\n\n      if (res.data.result === \"success\") {\n        user.challenges = res.data.challenges;\n      } // 리덕스에 저장\n\n\n      dispatch(actions.checkUser(user));\n    };\n\n    getLoginStatus();\n  }, [dispatch]); // login 여부 확인 완료된 시점에 접근하도록 구분\n\n  if (user === null) {\n    setSignOutClicked(false);\n    return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 12\n    }, this);\n  } // console.log(\"signOutClicked\", signOutClicked);\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.body,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.bodyInner,\n      children: [/*#__PURE__*/_jsxDEV(ToggleBtn, {\n        isMenuOn: isMenuOn,\n        setIsMenuOn: setIsMenuOn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cx(\"block\", \"block--title\"),\n        children: /*#__PURE__*/_jsxDEV(Title, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cx(\"block\", \"block--btn\", isMenuOn ? \"block--on\" : \"block--off\"),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: cx(\"btnRow\", \"btnRow--basic\"),\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            className: cx(\"btn\"),\n            children: \"챌린지 검색\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), user.login ? /*#__PURE__*/_jsxDEV(Link, {\n            to: `/user/${user.id}/room`,\n            className: cx(\"btn\"),\n            children: \"나의 어항\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: cx(\"btn\"),\n            onClick: () => switchSignInModal(),\n            children: \"나의 어항\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this), user.login ? /*#__PURE__*/_jsxDEV(Link, {\n            to: `/approval`,\n            className: cx(\"btn\"),\n            children: \"승인하기\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: cx(\"btn\"),\n            onClick: () => switchSignInModal(),\n            children: \"승인하기\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cx(\"btnRow\", \"btnRow--user\"),\n          children: user.login ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.username,\n              children: user.nickname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: cx(\"UserBtn\", \"UserBtn--logout\"),\n              onClick: () => handleLogout(),\n              children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: cx(\"UserBtn\", \"UserBtn--register\"),\n              onClick: () => switchSignUpModal(),\n              children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: cx(\"UserBtn\", \"UserBtn--login\"),\n              onClick: () => switchSignInModal(),\n              children: \"\\uB85C\\uADF8\\uC778\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SignUpModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SignInModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AuthRequestModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Header, \"cTVnSAlA/fw4OPhtyjKDL8szGRA=\", false, function () {\n  return [useSelector, useDispatch, useSelector, useNavigate];\n});\n\n_c = Header;\n\nfunction ToggleBtn(props) {\n  const {\n    isMenuOn,\n    setIsMenuOn\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: styles.toggleBtn,\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"text-gray-500 w-10 h-10 relative focus:outline-none bg-transparent\",\n      onClick: () => setIsMenuOn(!isMenuOn),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block w-5 absolute left-1/2 top-1/2   transform  -translate-x-1/2 -translate-y-1/2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          \"aria-hidden\": \"true\",\n          className: cx(\"block absolute h-0.5 w-5 bg-white transform transition duration-500 ease-in-out\", isMenuOn ? \"rotate-45\" : \"-translate-y-1.5\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          \"aria-hidden\": \"true\",\n          className: cx(\"block absolute h-0.5 w-5 bg-white transform transition duration-500 ease-in-out\", isMenuOn ? \"opacity-0\" : \"\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          \"aria-hidden\": \"true\",\n          className: cx(\"block absolute h-0.5 w-5 bg-white transform transition duration-500 ease-in-out\", isMenuOn ? \"-rotate-45\" : \"translate-y-1.5\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = ToggleBtn;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Header\");\n$RefreshReg$(_c2, \"ToggleBtn\");","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/Header/index.js"],"names":["React","useState","useEffect","useDispatch","useSelector","Link","useNavigate","Title","SignInModal","SignUpModal","AuthRequestModal","actions","api","styles","classNames","cx","bind","Header","props","user","signOutClicked","setSignOutClicked","dispatch","showSignUpModal","showSignInModal","modalOnOff","switchSignUpModal","switchSignInModal","navigate","handleLogout","get","logout","isMenuOn","setIsMenuOn","getLoginStatus","res","data","login","checkUser","challenges","result","body","bodyInner","id","username","nickname","ToggleBtn","toggleBtn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Title from \"./Title\";\nimport SignInModal from \"./SignInModal\";\nimport SignUpModal from \"./SignUpModal\";\nimport AuthRequestModal from \"./AuthRequestModal\";\nimport * as actions from \"../../Redux/actions\";\nimport api from \"../../apis/index\";\nimport styles from \"./index.module.css\";\nimport classNames from \"classnames/bind\";\nconst cx = classNames.bind(styles);\n\nexport default function Header(props) {\n  // redux에서 user정보 받아오기\n  const { user } = useSelector(({ user }) => ({ user: user.user }));\n  // const roomId = useSelector(({room}) =>({ roomId : room.roomId.roomId }))\n  const [signOutClicked, setSignOutClicked] = useState(false);\n\n  const dispatch = useDispatch();\n  const { showSignUpModal, showSignInModal } = useSelector(\n    ({ modalOnOff }) => ({\n      showSignUpModal: modalOnOff.showSignUpModal,\n      showSignInModal: modalOnOff.showSignInModal,\n    })\n  );\n  function switchSignUpModal() {\n    dispatch(actions.showSignInModal(false));\n    dispatch(actions.showSignUpModal(!showSignUpModal));\n  }\n\n  function switchSignInModal() {\n    dispatch(actions.showSignUpModal(false));\n    dispatch(actions.showSignInModal(!showSignInModal));\n  }\n\n  const navigate = useNavigate();\n  const handleLogout = async () => {\n    if (signOutClicked) return;\n\n    await api.get(\"/user/logout\");\n    setSignOutClicked(true);\n    dispatch(actions.logout());\n    navigate(\"/\");\n  };\n\n  // menu toggle\n  const [isMenuOn, setIsMenuOn] = useState(false);\n\n  useEffect(() => {\n    const getLoginStatus = async () => {\n      // 1단계: 로그인 상태 확인\n      let res = await api.get(\"/user/login/confirm\");\n      let user = res.data;\n      if (!res.data.login) {\n        dispatch(actions.checkUser(user)); // {login: false}\n        return;\n      }\n      user.challenges = [];\n      // 2단계: 유저 관련 정보 확인 (참여중 챌린지 등)\n      res = await api.get(\"/user/challenges/ids\");\n      if (res.data.result === \"success\") {\n        user.challenges = res.data.challenges;\n      }\n      // 리덕스에 저장\n      dispatch(actions.checkUser(user));\n    };\n    getLoginStatus();\n  }, [dispatch]);\n\n  // login 여부 확인 완료된 시점에 접근하도록 구분\n  if (user === null) {\n    setSignOutClicked(false);\n    return <div></div>;\n  }\n\n  // console.log(\"signOutClicked\", signOutClicked);\n\n  return (\n    <div className={styles.body}>\n      <div className={styles.bodyInner}>\n        <ToggleBtn isMenuOn={isMenuOn} setIsMenuOn={setIsMenuOn} />\n        <div className={cx(\"block\", \"block--title\")}>\n          <Title />\n        </div>\n        <div\n          className={cx(\n            \"block\",\n            \"block--btn\",\n            isMenuOn ? \"block--on\" : \"block--off\"\n          )}\n        >\n          <div className={cx(\"btnRow\", \"btnRow--basic\")}>\n            <Link to={\"/\"} className={cx(\"btn\")}>\n              {\"챌린지 검색\"}\n            </Link>\n            {user.login ? (\n              <Link to={`/user/${user.id}/room`} className={cx(\"btn\")}>\n                {\"나의 어항\"}\n              </Link>\n            ) : (\n              <p className={cx(\"btn\")} onClick={() => switchSignInModal()}>\n                {\"나의 어항\"}\n              </p>\n            )}\n            {user.login ? (\n              <Link to={`/approval`} className={cx(\"btn\")}>\n                {\"승인하기\"}\n              </Link>\n            ) : (\n              <p className={cx(\"btn\")} onClick={() => switchSignInModal()}>\n                {\"승인하기\"}\n              </p>\n            )}\n          </div>\n          <div className={cx(\"btnRow\", \"btnRow--user\")}>\n            {user.login ? (\n              <React.Fragment>\n                <div className={styles.username}>{user.nickname}</div>\n                <button\n                  type=\"button\"\n                  className={cx(\"UserBtn\", \"UserBtn--logout\")}\n                  onClick={() => handleLogout()}\n                >\n                  로그아웃\n                </button>\n              </React.Fragment>\n            ) : (\n              <React.Fragment>\n                <button\n                  type=\"button\"\n                  className={cx(\"UserBtn\", \"UserBtn--register\")}\n                  onClick={() => switchSignUpModal()}\n                >\n                  회원가입\n                </button>\n                <button\n                  type=\"button\"\n                  className={cx(\"UserBtn\", \"UserBtn--login\")}\n                  onClick={() => switchSignInModal()}\n                >\n                  로그인\n                </button>\n              </React.Fragment>\n            )}\n          </div>\n        </div>\n      </div>\n      <SignUpModal />\n      <SignInModal />\n      <AuthRequestModal />\n    </div>\n  );\n}\n\nfunction ToggleBtn(props) {\n  const { isMenuOn, setIsMenuOn } = props;\n  return (\n    <nav className={styles.toggleBtn}>\n      <button\n        className=\"text-gray-500 w-10 h-10 relative focus:outline-none bg-transparent\"\n        onClick={() => setIsMenuOn(!isMenuOn)}\n      >\n        <div className=\"block w-5 absolute left-1/2 top-1/2   transform  -translate-x-1/2 -translate-y-1/2\">\n          <span\n            aria-hidden=\"true\"\n            className={cx(\n              \"block absolute h-0.5 w-5 bg-white transform transition duration-500 ease-in-out\",\n              isMenuOn ? \"rotate-45\" : \"-translate-y-1.5\"\n            )}\n          ></span>\n          <span\n            aria-hidden=\"true\"\n            className={cx(\n              \"block absolute h-0.5 w-5 bg-white transform transition duration-500 ease-in-out\",\n              isMenuOn ? \"opacity-0\" : \"\"\n            )}\n          ></span>\n          <span\n            aria-hidden=\"true\"\n            className={cx(\n              \"block absolute h-0.5 w-5 bg-white transform transition duration-500 ease-in-out\",\n              isMenuOn ? \"-rotate-45\" : \"translate-y-1.5\"\n            )}\n          ></span>\n        </div>\n      </button>\n    </nav>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}