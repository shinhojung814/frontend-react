{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/NewChallenge/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router\";\nimport ReactSlider from \"react-slider\";\nimport api from \"../../apis/index.js\";\nimport \"./index.module.css\";\nimport \"./NewChallenge.css\"; // import Background from \"../../image/createChallenge.jpeg\";\n\nimport * as actions from \"../../Redux/actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewChallenge(props) {\n  _s();\n\n  // TODO: login 상태일 때만 접근할 수 있음\n  // TODO: 챌린지에 접근 가능한 유저인지 확인해주어야 함\n  const dispatch = useDispatch();\n  const SELECT_DEFAULT = 0;\n  const [challengeTitle, setChallengeTitle] = useState(\"\");\n  const [challengeDescription, setChallengeDescription] = useState(\"\");\n  const [challengeCapacity, setChallengeCapacity] = useState(SELECT_DEFAULT);\n  const [challengeFrequency, setChallengeFrequency] = useState(SELECT_DEFAULT);\n  const [challengeCategory, setChallengeCategory] = useState(SELECT_DEFAULT);\n  const [challengeMessage, setChallengeMessage] = useState(null);\n  const [challengeImage, setChallengeImage] = useState(null);\n\n  function handleImage(e) {\n    setChallengeImage(e.target.files);\n  }\n\n  function handleTitle(e) {\n    setChallengeTitle(e.target.value);\n  }\n\n  function handleDescription(e) {\n    setChallengeDescription(e.target.value);\n  }\n\n  function handleCapacity(challengeCapacity) {\n    setChallengeCapacity(challengeCapacity);\n  }\n\n  function handleFrequency(e) {\n    setChallengeFrequency(e.target.value);\n  }\n\n  function handleCategory(e) {\n    setChallengeCategory(e.target.value);\n  }\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateChallenge(challengeTitle, challengeDescription, challengeCapacity, challengeFrequency, challengeCategory, challengeImage)) return; // post the image direclty to the s3 bucket\n\n    if (challengeImage) {\n      const res = await api.get(\"/main/s3Url\");\n      const {\n        url\n      } = res.data;\n      await fetch(url, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        body: challengeImage[0]\n      });\n      const imageUrl = url.split(\"?\")[0];\n      setChallengeMessage(null);\n      postChallenge(imageUrl);\n    } else {\n      setChallengeMessage(null);\n      postChallenge();\n    }\n  };\n\n  const navigate = useNavigate();\n\n  const handleCancel = () => {\n    navigate(\"/\");\n    return;\n  };\n\n  function validateChallenge(challengeTitle, challengeDescription, challengeCapacity, challengeFrequency, challengeCategory) {\n    if (challengeTitle === \"\" || challengeDescription === \"\" || challengeCapacity === 0 || challengeFrequency === SELECT_DEFAULT || challengeCategory === SELECT_DEFAULT) {\n      setChallengeMessage(\"입력하지 않은 챌린지 정보가 있습니다.\");\n      return false;\n    }\n\n    setChallengeMessage(null);\n    return true;\n  }\n\n  const postChallenge = async imageUrl => {\n    let challengeData = {\n      challenge_name: challengeTitle,\n      challenge_content: challengeDescription,\n      max_user: challengeCapacity,\n      cnt_of_week: challengeFrequency,\n      tag: challengeCategory,\n      image_url: imageUrl\n    };\n    const res = await api.post(\"/challenge/create\", challengeData);\n    console.log(\"res\", res);\n\n    if (res.data.result === \"success\") {\n      console.log(\"challengeData\", challengeData);\n      console.log(\"res\", res.data.data);\n      const challengeId = res.data.data.challenge_id; // 고민: 방장이 챌린지 생성 후 생명체를 만들지 않고 나가버리면 추후에 어떻게 챌린지방을 찾을 수 있는가?\n      // alert(\"챌린지 생성에 성공하였습니다.\");\n\n      dispatch(actions.setPopupModal(\"CREATE_CHALLENGE\", \"챌린지가 생성되었습니다 !\", \"SUCC\", () => {\n        navigate(`/challenge/${challengeId}/room`);\n      }));\n      return;\n    } else {\n      console.log(\"challengeData\", challengeData);\n      setChallengeMessage(\"입력하지 않은 챌린지 정보가 있습니다.\");\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen w-full justify-center items-center bg-gradient-to-r from-indigo-900 via-gray-700 to-purple-900 hover:from-purple-900 hover:via-gray-500 hover:to-indigo-900\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-w-max h-2/3 md:min-h-2/3 w-1/2 rounded-xl bg-gray-100 shadow-2xl overflow-y-auto p-4  md:p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"block w-full text-center md:text-2xl text-lg font-bold mb-6\",\n        children: \"\\uC0C8\\uB85C\\uC6B4 \\uCC4C\\uB9B0\\uC9C0 \\uC0DD\\uC131\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm md:text-lg \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col px-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-2 font-bold\",\n            children: \"\\uCC4C\\uB9B0\\uC9C0 \\uC774\\uB984\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"border rounded-xl py-2 px-3\",\n            type: \"text\",\n            name: \"challenge_name\",\n            id: \"challenge_name\",\n            value: challengeTitle,\n            onChange: handleTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col min-w-max relative py-2 px-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-1 font-bold\",\n            children: \"\\uCC4C\\uB9B0\\uC9C0 \\uCE74\\uD14C\\uACE0\\uB9AC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"text-sm md:text-lg border rounded-xl pl-5 bg-white hover:border-gray-400 focus:outline-none appearance-none\",\n            value: challengeCategory,\n            onChange: handleCategory,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\uCE74\\uD14C\\uACE0\\uB9AC \\uC120\\uD0DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\uAC74\\uAC15\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\uC6B4\\uB3D9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\uACF5\\uBD80\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\uB3C5\\uC11C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\uC790\\uAE30\\uAC1C\\uBC1C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\uCDE8\\uBBF8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\uAE30\\uD0C0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col px-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-1 font-bold \",\n            children: \"\\uCC4C\\uB9B0\\uC9C0 \\uC124\\uBA85\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"border rounded-xl py-2 \",\n            rows: \"2\",\n            value: challengeDescription,\n            onChange: handleDescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col px-3 py-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \" font-bold \",\n            children: \"\\uCD5C\\uB300 \\uCC38\\uC5EC \\uC778\\uC6D0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ReactSlider, {\n            step: 5,\n            min: 0,\n            max: 100,\n            valueLabelDisplay: \"on\",\n            className: \"w-full h-3 pr-2 my-4 bg-gray-200 rounded-md cursor-grab\",\n            thumbClassName: \"m-auto w-5 h-5 cursor-grab bg-indigo-500 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 -top-2px\",\n            value: challengeCapacity,\n            onChange: handleCapacity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [challengeCapacity, \" \\uBA85\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mb-2 rounded-xl font-bold \",\n            children: \"\\uCC4C\\uB9B0\\uC9C0 \\uCC38\\uC5EC \\uBE48\\uB3C4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"text-sm md:text-lg border rounded-xl\",\n            value: challengeFrequency,\n            onChange: handleFrequency,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: SELECT_DEFAULT,\n              children: \"\\uCC38\\uC5EC \\uBE48\\uB3C4 \\uC120\\uD0DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"7\",\n              children: \"\\uB9E4\\uC77C \\uCC38\\uC5EC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"6\",\n              children: \"\\uC8FC 6\\uD68C \\uCC38\\uC5EC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"5\",\n              children: \"\\uC8FC 5\\uD68C \\uCC38\\uC5EC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"4\",\n              children: \"\\uC8FC 4\\uD68C \\uCC38\\uC5EC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"3\",\n              children: \"\\uC8FC 3\\uD68C \\uCC38\\uC5EC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"2\",\n              children: \"\\uC8FC 2\\uD68C \\uCC38\\uC5EC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"\\uC8FC 1\\uD68C \\uCC38\\uC5EC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Attachments\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col min-h-0 min-w-max items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-lg font-bold\",\n              children: \"\\uCC4C\\uB9B0\\uC9C0 \\uC774\\uBBF8\\uC9C0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-folder-open fa-3x text-blue-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"block  text-gray-400 font-normal\",\n              children: \"\\uCC4C\\uB9B0\\uC9C0\\uB97C \\uAC04\\uB2E8\\uD558\\uAC8C \\uD45C\\uD604\\uD558\\uB294 \\uC774\\uBBF8\\uC9C0\\uB97C \\uCCA8\\uBD80\\uD574\\uC8FC\\uC138\\uC694.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              className: \"flex flex-col opacity-0\",\n              accept: \"image/*\",\n              onChange: handleImage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-col min-w-max justify-center items-center px-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-red-600 animate-pulse\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: challengeMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 pl-3 pr-3 transition-colors duration-700 transform bg-indigo-500 hover:bg-blue-500 text-gray-100 rounded-lg focus:border-4 border-indigo-300\",\n              type: \"button\",\n              onClick: handleSubmit,\n              children: \"\\uCC4C\\uB9B0\\uC9C0 \\uC0DD\\uC131\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"mx-5 pl-5 pr-5 transition-colors duration-700 transform bg-gray-300 hover:bg-gray-400 text-black-100 rounded-lg focus:border-4 border-indigo-300\",\n              type: \"button\",\n              onClick: handleCancel,\n              children: \"\\uCDE8\\uC18C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewChallenge, \"hh9inq49bdRTzTGY/65sMEX/mWc=\", false, function () {\n  return [useDispatch, useNavigate];\n});\n\n_c = NewChallenge;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewChallenge\");","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/NewChallenge/index.js"],"names":["React","useState","useDispatch","useNavigate","ReactSlider","api","actions","NewChallenge","props","dispatch","SELECT_DEFAULT","challengeTitle","setChallengeTitle","challengeDescription","setChallengeDescription","challengeCapacity","setChallengeCapacity","challengeFrequency","setChallengeFrequency","challengeCategory","setChallengeCategory","challengeMessage","setChallengeMessage","challengeImage","setChallengeImage","handleImage","e","target","files","handleTitle","value","handleDescription","handleCapacity","handleFrequency","handleCategory","handleSubmit","preventDefault","validateChallenge","res","get","url","data","fetch","method","headers","body","imageUrl","split","postChallenge","navigate","handleCancel","challengeData","challenge_name","challenge_content","max_user","cnt_of_week","tag","image_url","post","console","log","result","challengeId","challenge_id","setPopupModal"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAO,oBAAP;AACA,OAAO,oBAAP,C,CACA;;AACA,OAAO,KAAKC,OAAZ,MAAyB,qBAAzB;;AAEA,eAAe,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAAA;;AAC1C;AACA;AAEA,QAAMC,QAAQ,GAAGP,WAAW,EAA5B;AAEA,QAAMQ,cAAc,GAAG,CAAvB;AACA,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCX,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACY,oBAAD,EAAuBC,uBAAvB,IAAkDb,QAAQ,CAAC,EAAD,CAAhE;AACA,QAAM,CAACc,iBAAD,EAAoBC,oBAApB,IAA4Cf,QAAQ,CAACS,cAAD,CAA1D;AACA,QAAM,CAACO,kBAAD,EAAqBC,qBAArB,IAA8CjB,QAAQ,CAACS,cAAD,CAA5D;AACA,QAAM,CAACS,iBAAD,EAAoBC,oBAApB,IAA4CnB,QAAQ,CAACS,cAAD,CAA1D;AACA,QAAM,CAACW,gBAAD,EAAmBC,mBAAnB,IAA0CrB,QAAQ,CAAC,IAAD,CAAxD;AACA,QAAM,CAACsB,cAAD,EAAiBC,iBAAjB,IAAsCvB,QAAQ,CAAC,IAAD,CAApD;;AAEA,WAASwB,WAAT,CAAqBC,CAArB,EAAwB;AACtBF,IAAAA,iBAAiB,CAACE,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB;AACD;;AAED,WAASC,WAAT,CAAqBH,CAArB,EAAwB;AACtBd,IAAAA,iBAAiB,CAACc,CAAC,CAACC,MAAF,CAASG,KAAV,CAAjB;AACD;;AAED,WAASC,iBAAT,CAA2BL,CAA3B,EAA8B;AAC5BZ,IAAAA,uBAAuB,CAACY,CAAC,CAACC,MAAF,CAASG,KAAV,CAAvB;AACD;;AAED,WAASE,cAAT,CAAwBjB,iBAAxB,EAA2C;AACzCC,IAAAA,oBAAoB,CAACD,iBAAD,CAApB;AACD;;AAED,WAASkB,eAAT,CAAyBP,CAAzB,EAA4B;AAC1BR,IAAAA,qBAAqB,CAACQ,CAAC,CAACC,MAAF,CAASG,KAAV,CAArB;AACD;;AAED,WAASI,cAAT,CAAwBR,CAAxB,EAA2B;AACzBN,IAAAA,oBAAoB,CAACM,CAAC,CAACC,MAAF,CAASG,KAAV,CAApB;AACD;;AAED,QAAMK,YAAY,GAAG,MAAOT,CAAP,IAAa;AAChCA,IAAAA,CAAC,CAACU,cAAF;AACA,QACE,CAACC,iBAAiB,CAChB1B,cADgB,EAEhBE,oBAFgB,EAGhBE,iBAHgB,EAIhBE,kBAJgB,EAKhBE,iBALgB,EAMhBI,cANgB,CADpB,EAUE,OAZ8B,CAchC;;AACA,QAAIA,cAAJ,EAAoB;AAClB,YAAMe,GAAG,GAAG,MAAMjC,GAAG,CAACkC,GAAJ,CAAQ,aAAR,CAAlB;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAUF,GAAG,CAACG,IAApB;AACA,YAAMC,KAAK,CAACF,GAAD,EAAM;AACfG,QAAAA,MAAM,EAAE,KADO;AAEfC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFM;AAKfC,QAAAA,IAAI,EAAEtB,cAAc,CAAC,CAAD;AALL,OAAN,CAAX;AAOA,YAAMuB,QAAQ,GAAGN,GAAG,CAACO,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAjB;AAEAzB,MAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACA0B,MAAAA,aAAa,CAACF,QAAD,CAAb;AACD,KAdD,MAcO;AACLxB,MAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACA0B,MAAAA,aAAa;AACd;AACF,GAjCD;;AAmCA,QAAMC,QAAQ,GAAG9C,WAAW,EAA5B;;AACA,QAAM+C,YAAY,GAAG,MAAM;AACzBD,IAAAA,QAAQ,CAAC,GAAD,CAAR;AACA;AACD,GAHD;;AAKA,WAASZ,iBAAT,CACE1B,cADF,EAEEE,oBAFF,EAGEE,iBAHF,EAIEE,kBAJF,EAKEE,iBALF,EAME;AACA,QACER,cAAc,KAAK,EAAnB,IACAE,oBAAoB,KAAK,EADzB,IAEAE,iBAAiB,KAAK,CAFtB,IAGAE,kBAAkB,KAAKP,cAHvB,IAIAS,iBAAiB,KAAKT,cALxB,EAME;AACAY,MAAAA,mBAAmB,CAAC,uBAAD,CAAnB;AACA,aAAO,KAAP;AACD;;AAEDA,IAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACA,WAAO,IAAP;AACD;;AAED,QAAM0B,aAAa,GAAG,MAAOF,QAAP,IAAoB;AACxC,QAAIK,aAAa,GAAG;AAClBC,MAAAA,cAAc,EAAEzC,cADE;AAElB0C,MAAAA,iBAAiB,EAAExC,oBAFD;AAGlByC,MAAAA,QAAQ,EAAEvC,iBAHQ;AAIlBwC,MAAAA,WAAW,EAAEtC,kBAJK;AAKlBuC,MAAAA,GAAG,EAAErC,iBALa;AAMlBsC,MAAAA,SAAS,EAAEX;AANO,KAApB;AASA,UAAMR,GAAG,GAAG,MAAMjC,GAAG,CAACqD,IAAJ,CAAS,mBAAT,EAA8BP,aAA9B,CAAlB;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBtB,GAAnB;;AAEA,QAAIA,GAAG,CAACG,IAAJ,CAASoB,MAAT,KAAoB,SAAxB,EAAmC;AACjCF,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BT,aAA7B;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBtB,GAAG,CAACG,IAAJ,CAASA,IAA5B;AACA,YAAMqB,WAAW,GAAGxB,GAAG,CAACG,IAAJ,CAASA,IAAT,CAAcsB,YAAlC,CAHiC,CAIjC;AACA;;AACAtD,MAAAA,QAAQ,CACNH,OAAO,CAAC0D,aAAR,CACE,kBADF,EAEE,gBAFF,EAGE,MAHF,EAIE,MAAM;AACJf,QAAAA,QAAQ,CAAE,cAAaa,WAAY,OAA3B,CAAR;AACD,OANH,CADM,CAAR;AAUA;AACD,KAjBD,MAiBO;AACLH,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BT,aAA7B;AACA7B,MAAAA,mBAAmB,CAAC,uBAAD,CAAnB;AACA;AACD;AACF,GAnCD;;AAqCA,sBACE;AAAK,IAAA,SAAS,EAAC,2KAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,kGAAf;AAAA,8BACE;AAAI,QAAA,SAAS,EAAC,6DAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AACE,YAAA,SAAS,EAAC,6BADZ;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,IAAI,EAAC,gBAHP;AAIE,YAAA,EAAE,EAAC,gBAJL;AAKE,YAAA,KAAK,EAAEX,cALT;AAME,YAAA,QAAQ,EAAEkB;AANZ;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAaE;AAAK,UAAA,SAAS,EAAC,4CAAf;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AACE,YAAA,SAAS,EAAC,6GADZ;AAEE,YAAA,KAAK,EAAEV,iBAFT;AAGE,YAAA,QAAQ,EAAEe,cAHZ;AAAA,oCAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF,eA+BE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,iBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AACE,YAAA,SAAS,EAAC,yBADZ;AAEE,YAAA,IAAI,EAAC,GAFP;AAGE,YAAA,KAAK,EAAErB,oBAHT;AAIE,YAAA,QAAQ,EAAEkB;AAJZ;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/BF,eAyCE;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,WAAD;AACE,YAAA,IAAI,EAAE,CADR;AAEE,YAAA,GAAG,EAAE,CAFP;AAGE,YAAA,GAAG,EAAE,GAHP;AAIE,YAAA,iBAAiB,EAAC,IAJpB;AAKE,YAAA,SAAS,EAAC,yDALZ;AAME,YAAA,cAAc,EAAC,0IANjB;AAOE,YAAA,KAAK,EAAEhB,iBAPT;AAQE,YAAA,QAAQ,EAAEiB;AARZ;AAAA;AAAA;AAAA;AAAA,kBAFF,eAYE;AAAA,uBAAOjB,iBAAP;AAAA;AAAA;AAAA;AAAA;AAAA,kBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzCF,eAwDE;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,4BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AACE,YAAA,SAAS,EAAC,sCADZ;AAEE,YAAA,KAAK,EAAEE,kBAFT;AAGE,YAAA,QAAQ,EAAEgB,eAHZ;AAAA,oCAKE;AAAQ,cAAA,KAAK,EAAEvB,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,eAME;AAAQ,cAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBANF,eAOE;AAAQ,cAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPF,eAQE;AAAQ,cAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF,eASE;AAAQ,cAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF,eAUE;AAAQ,cAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVF,eAWE;AAAQ,cAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXF,eAYE;AAAQ,cAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxDF,eAsFE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,8CAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,cAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,oBAFF,eAGE;AAAM,cAAA,SAAS,EAAC,kCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF,eAME;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,SAAS,EAAC,yBAFZ;AAGE,cAAA,MAAM,EAAC,SAHT;AAIE,cAAA,QAAQ,EAAEe;AAJZ;AAAA;AAAA;AAAA;AAAA,oBANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAtFF,eAsGE;AAAK,UAAA,SAAS,EAAC,qDAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,wCAAf;AAAA,oCACE;AAAA,wBAAKJ;AAAL;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAKE;AAAK,YAAA,SAAS,EAAC,qBAAf;AAAA,oCACE;AACE,cAAA,SAAS,EAAC,kJADZ;AAEE,cAAA,IAAI,EAAC,QAFP;AAGE,cAAA,OAAO,EAAEc,YAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAQE;AACE,cAAA,SAAS,EAAC,kJADZ;AAEE,cAAA,IAAI,EAAC,QAFP;AAGE,cAAA,OAAO,EAAEe,YAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtGF;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAsID;;GAjRuB3C,Y;UAILL,W,EAsEAC,W;;;KA1EKI,Y","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router\";\nimport ReactSlider from \"react-slider\";\nimport api from \"../../apis/index.js\";\nimport \"./index.module.css\";\nimport \"./NewChallenge.css\";\n// import Background from \"../../image/createChallenge.jpeg\";\nimport * as actions from \"../../Redux/actions\";\n\nexport default function NewChallenge(props) {\n  // TODO: login 상태일 때만 접근할 수 있음\n  // TODO: 챌린지에 접근 가능한 유저인지 확인해주어야 함\n\n  const dispatch = useDispatch();\n\n  const SELECT_DEFAULT = 0;\n  const [challengeTitle, setChallengeTitle] = useState(\"\");\n  const [challengeDescription, setChallengeDescription] = useState(\"\");\n  const [challengeCapacity, setChallengeCapacity] = useState(SELECT_DEFAULT);\n  const [challengeFrequency, setChallengeFrequency] = useState(SELECT_DEFAULT);\n  const [challengeCategory, setChallengeCategory] = useState(SELECT_DEFAULT);\n  const [challengeMessage, setChallengeMessage] = useState(null);\n  const [challengeImage, setChallengeImage] = useState(null);\n\n  function handleImage(e) {\n    setChallengeImage(e.target.files);\n  }\n\n  function handleTitle(e) {\n    setChallengeTitle(e.target.value);\n  }\n\n  function handleDescription(e) {\n    setChallengeDescription(e.target.value);\n  }\n\n  function handleCapacity(challengeCapacity) {\n    setChallengeCapacity(challengeCapacity);\n  }\n\n  function handleFrequency(e) {\n    setChallengeFrequency(e.target.value);\n  }\n\n  function handleCategory(e) {\n    setChallengeCategory(e.target.value);\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (\n      !validateChallenge(\n        challengeTitle,\n        challengeDescription,\n        challengeCapacity,\n        challengeFrequency,\n        challengeCategory,\n        challengeImage\n      )\n    )\n      return;\n\n    // post the image direclty to the s3 bucket\n    if (challengeImage) {\n      const res = await api.get(\"/main/s3Url\");\n      const { url } = res.data;\n      await fetch(url, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n        body: challengeImage[0],\n      });\n      const imageUrl = url.split(\"?\")[0];\n\n      setChallengeMessage(null);\n      postChallenge(imageUrl);\n    } else {\n      setChallengeMessage(null);\n      postChallenge();\n    }\n  };\n\n  const navigate = useNavigate();\n  const handleCancel = () => {\n    navigate(\"/\");\n    return;\n  };\n\n  function validateChallenge(\n    challengeTitle,\n    challengeDescription,\n    challengeCapacity,\n    challengeFrequency,\n    challengeCategory\n  ) {\n    if (\n      challengeTitle === \"\" ||\n      challengeDescription === \"\" ||\n      challengeCapacity === 0 ||\n      challengeFrequency === SELECT_DEFAULT ||\n      challengeCategory === SELECT_DEFAULT\n    ) {\n      setChallengeMessage(\"입력하지 않은 챌린지 정보가 있습니다.\");\n      return false;\n    }\n\n    setChallengeMessage(null);\n    return true;\n  }\n\n  const postChallenge = async (imageUrl) => {\n    let challengeData = {\n      challenge_name: challengeTitle,\n      challenge_content: challengeDescription,\n      max_user: challengeCapacity,\n      cnt_of_week: challengeFrequency,\n      tag: challengeCategory,\n      image_url: imageUrl,\n    };\n\n    const res = await api.post(\"/challenge/create\", challengeData);\n    console.log(\"res\", res);\n\n    if (res.data.result === \"success\") {\n      console.log(\"challengeData\", challengeData);\n      console.log(\"res\", res.data.data);\n      const challengeId = res.data.data.challenge_id;\n      // 고민: 방장이 챌린지 생성 후 생명체를 만들지 않고 나가버리면 추후에 어떻게 챌린지방을 찾을 수 있는가?\n      // alert(\"챌린지 생성에 성공하였습니다.\");\n      dispatch(\n        actions.setPopupModal(\n          \"CREATE_CHALLENGE\",\n          \"챌린지가 생성되었습니다 !\",\n          \"SUCC\",\n          () => {\n            navigate(`/challenge/${challengeId}/room`);\n          }\n        )\n      );\n      return;\n    } else {\n      console.log(\"challengeData\", challengeData);\n      setChallengeMessage(\"입력하지 않은 챌린지 정보가 있습니다.\");\n      return;\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen w-full justify-center items-center bg-gradient-to-r from-indigo-900 via-gray-700 to-purple-900 hover:from-purple-900 hover:via-gray-500 hover:to-indigo-900\">\n      <div className=\"min-w-max h-2/3 md:min-h-2/3 w-1/2 rounded-xl bg-gray-100 shadow-2xl overflow-y-auto p-4  md:p-8\">\n        <h1 className=\"block w-full text-center md:text-2xl text-lg font-bold mb-6\">\n          새로운 챌린지 생성\n        </h1>\n        <div className=\"text-sm md:text-lg \">\n          <div className=\"flex flex-col px-4\">\n            <label className=\"mb-2 font-bold\">챌린지 이름</label>\n            <input\n              className=\"border rounded-xl py-2 px-3\"\n              type=\"text\"\n              name=\"challenge_name\"\n              id=\"challenge_name\"\n              value={challengeTitle}\n              onChange={handleTitle}\n            />\n          </div>\n\n          <div className=\"flex flex-col min-w-max relative py-2 px-3\">\n            <label className=\"mb-1 font-bold\">챌린지 카테고리</label>\n            <select\n              className=\"text-sm md:text-lg border rounded-xl pl-5 bg-white hover:border-gray-400 focus:outline-none appearance-none\"\n              value={challengeCategory}\n              onChange={handleCategory}\n            >\n              <option>카테고리 선택</option>\n              <option>건강</option>\n              <option>운동</option>\n              <option>공부</option>\n              <option>독서</option>\n              <option>자기개발</option>\n              <option>취미</option>\n              <option>기타</option>\n            </select>\n          </div>\n\n          <div className=\"flex flex-col px-3\">\n            <label className=\"mb-1 font-bold \">챌린지 설명</label>\n            <textarea\n              className=\"border rounded-xl py-2 \"\n              rows=\"2\"\n              value={challengeDescription}\n              onChange={handleDescription}\n            ></textarea>\n          </div>\n\n          <div className=\"flex flex-col px-3 py-2\">\n            <label className=\" font-bold \">최대 참여 인원</label>\n            <ReactSlider\n              step={5}\n              min={0}\n              max={100}\n              valueLabelDisplay=\"on\"\n              className=\"w-full h-3 pr-2 my-4 bg-gray-200 rounded-md cursor-grab\"\n              thumbClassName=\"m-auto w-5 h-5 cursor-grab bg-indigo-500 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 -top-2px\"\n              value={challengeCapacity}\n              onChange={handleCapacity}\n            />\n            <span>{challengeCapacity} 명</span>\n          </div>\n\n          <div className=\"flex flex-col p-3\">\n            <label className=\"mb-2 rounded-xl font-bold \">\n              챌린지 참여 빈도\n            </label>\n            <select\n              className=\"text-sm md:text-lg border rounded-xl\"\n              value={challengeFrequency}\n              onChange={handleFrequency}\n            >\n              <option value={SELECT_DEFAULT}>참여 빈도 선택</option>\n              <option value=\"7\">매일 참여</option>\n              <option value=\"6\">주 6회 참여</option>\n              <option value=\"5\">주 5회 참여</option>\n              <option value=\"4\">주 4회 참여</option>\n              <option value=\"3\">주 3회 참여</option>\n              <option value=\"2\">주 2회 참여</option>\n              <option value=\"1\">주 1회 참여</option>\n            </select>\n          </div>\n\n          {/* <div>\n            <input\n              className=\"p-4\"\n              id=\"imageInput\"\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImage}\n            ></input>\n          </div> */}\n\n          <div className=\"Attachments\">\n            <div className=\"flex flex-col min-h-0 min-w-max items-center\">\n              <label className=\"text-lg font-bold\">챌린지 이미지</label>\n              <i className=\"fa fa-folder-open fa-3x text-blue-700\" />\n              <span className=\"block  text-gray-400 font-normal\">\n                챌린지를 간단하게 표현하는 이미지를 첨부해주세요.\n              </span>\n              <input\n                type=\"file\"\n                className=\"flex flex-col opacity-0\"\n                accept=\"image/*\"\n                onChange={handleImage}\n              />\n            </div>\n          </div>\n\n          <div className=\"flex-col min-w-max justify-center items-center px-3\">\n            <div className=\"text-center text-red-600 animate-pulse\">\n              <h1>{challengeMessage}</h1>\n              <br />\n            </div>\n            <div className=\"flex justify-center\">\n              <button\n                className=\"p-2 pl-3 pr-3 transition-colors duration-700 transform bg-indigo-500 hover:bg-blue-500 text-gray-100 rounded-lg focus:border-4 border-indigo-300\"\n                type=\"button\"\n                onClick={handleSubmit}\n              >\n                챌린지 생성\n              </button>\n              <button\n                className=\"mx-5 pl-5 pr-5 transition-colors duration-700 transform bg-gray-300 hover:bg-gray-400 text-black-100 rounded-lg focus:border-4 border-indigo-300\"\n                type=\"button\"\n                onClick={handleCancel}\n              >\n                취소\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}