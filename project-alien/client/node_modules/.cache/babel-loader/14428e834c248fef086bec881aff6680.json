{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/Header/Modal/SideBarModal2.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./SideBarModal2.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as actions from \"../../../../Redux/actions/index.js\";\nimport api from \"../../../../apis/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function SideBarModal2() {\n  _s();\n\n  // console.log(\"alien밖: \", alien);\n  const showModal2 = useSelector(state => state.modalOnOff.showModal2);\n  const alien = useSelector(state => state.alien_auth_func.alien_auth);\n  const dispatch = useDispatch();\n  const [authImage, setAuthImage] = useState(null);\n  const [authMessage, setAuthMessage] = useState(\"\");\n  console.log(\"authImage\", authImage);\n  console.log(\"authMessage\", authMessage);\n\n  const handleSubmit = async e => {\n    // console.log(\"alien안: \", alien);\n    // console.log(\"alien안_id: \", alien.alien.id);\n    e.preventDefault();\n    const res = await api.get(\"/main/s3Url\");\n    console.log(\"url\", res.data.url);\n    const {\n      url\n    } = res.data;\n    console.log(url); // post the image direclty to the s3 bucket\n\n    await fetch(url, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      },\n      body: authImage[0]\n    });\n    const imageUrl = url.split(\"?\")[0];\n    console.log(imageUrl);\n    console.log(\"문자적자\", alien.alien.user_info_id);\n    const resp = {\n      user_info_id: alien.alien.user_info_id,\n      Alien_id: alien.alien.id,\n      Challenge_id: alien.alien.Challenge_id,\n      comment: authMessage,\n      imgURL: imageUrl\n    }; // // dummy test용\n    // const resp = {\n    //   user_info_id: 1,\n    //   Alien_id: 1,\n    //   Challenge_id: 1,\n    //   requestUserNickname: \"John\",\n    //   comment: authMessage,\n    //   imgURL: imageUrl,\n    // };\n    // post requst to my server to store any extra data\n\n    const result = await api.post(\"/challenge/auth\", resp);\n    console.log(result);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: showModal2 ? \"ModalContainer2\" : \"hidden2\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          id: \"imageForm\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uC778\\uC99D\\uD558\\uAE30 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            type: \"text\",\n            placeholder: \"Comment\",\n            onChange: e => {\n              setAuthMessage(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"imageInput\",\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => {\n              setAuthImage(e.target.files);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleSubmit,\n            children: \"\\uC0AC\\uC9C4 \\uC5C5\\uB85C\\uB4DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(SideBarModal2, \"OZFAlP0kp8gGruhr1+t6QjjC+v4=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = SideBarModal2;\n\nvar _c;\n\n$RefreshReg$(_c, \"SideBarModal2\");","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/Header/Modal/SideBarModal2.js"],"names":["React","useState","useSelector","useDispatch","actions","api","SideBarModal2","showModal2","state","modalOnOff","alien","alien_auth_func","alien_auth","dispatch","authImage","setAuthImage","authMessage","setAuthMessage","console","log","handleSubmit","e","preventDefault","res","get","data","url","fetch","method","headers","body","imageUrl","split","user_info_id","resp","Alien_id","id","Challenge_id","comment","imgURL","result","post","target","value","files"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport \"./SideBarModal2.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as actions from \"../../../../Redux/actions/index.js\";\nimport api from \"../../../../apis/index\";\n\nexport default function SideBarModal2() {\n  // console.log(\"alien밖: \", alien);\n  const showModal2 = useSelector((state) => state.modalOnOff.showModal2);\n  const alien = useSelector((state) => state.alien_auth_func.alien_auth);\n  const dispatch = useDispatch();\n  const [authImage, setAuthImage] = useState(null);\n  const [authMessage, setAuthMessage] = useState(\"\");\n\n  console.log(\"authImage\", authImage);\n  console.log(\"authMessage\", authMessage);\n\n  const handleSubmit = async (e) => {\n    // console.log(\"alien안: \", alien);\n    // console.log(\"alien안_id: \", alien.alien.id);\n    e.preventDefault();\n    const res = await api.get(\"/main/s3Url\");\n    console.log(\"url\", res.data.url);\n    const { url } = res.data;\n    console.log(url);\n\n    // post the image direclty to the s3 bucket\n    await fetch(url, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n      body: authImage[0],\n    });\n    const imageUrl = url.split(\"?\")[0];\n    console.log(imageUrl);\n    console.log(\"문자적자\", alien.alien.user_info_id);\n    const resp = {\n      user_info_id: alien.alien.user_info_id,\n      Alien_id: alien.alien.id,\n      Challenge_id: alien.alien.Challenge_id,\n      comment: authMessage,\n      imgURL: imageUrl,\n    };\n\n    // // dummy test용\n    // const resp = {\n    //   user_info_id: 1,\n    //   Alien_id: 1,\n    //   Challenge_id: 1,\n    //   requestUserNickname: \"John\",\n    //   comment: authMessage,\n    //   imgURL: imageUrl,\n    // };\n\n    // post requst to my server to store any extra data\n    const result = await api.post(\"/challenge/auth\", resp);\n    console.log(result);\n  };\n\n  return (\n    <>\n      {/* <div\n        className={showModal2 ? \"Background2\" : null}\n        onClick={() => {\n          dispatch(actions.showModal2(false));\n        }}\n      /> */}\n      <div>\n        <div className={showModal2 ? \"ModalContainer2\" : \"hidden2\"}>\n          <form id=\"imageForm\">\n            <p>인증하기 </p>\n            <textarea\n              type=\"text\"\n              placeholder=\"Comment\"\n              onChange={(e) => {\n                setAuthMessage(e.target.value);\n              }}\n            ></textarea>\n            <input\n              id=\"imageInput\"\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={(e) => {\n                setAuthImage(e.target.files);\n              }}\n            ></input>\n            <button type=\"button\" onClick={handleSubmit}>\n              사진 업로드\n            </button>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}