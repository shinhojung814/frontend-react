{"ast":null,"code":"var _jsxFileName = \"/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/MultiField/index.js\";\nimport React, { Component } from \"react\";\nimport Canvas from \"../../../components/Canvas\"; // import * as socket from \"../../../apis/socket\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Field extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.draw = (ctx, frameCnt, mouseObj) => {\n      // console.log(mouseObj);\n      let cvsWidth = ctx.canvas.width;\n      let cvsHeight = ctx.canvas.height;\n      ctx.save();\n      ctx.clearRect(0, 0, cvsWidth, cvsHeight);\n\n      if (this.props.room && this.props.room.fieldState) {\n        const room = this.props.room;\n        const {\n          monsters\n        } = room.fieldState; // draw background\n        // ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n\n        ctx.fillStyle = `rgba(3, 33, 74, 1)`;\n        ctx.fillRect(0, 0, cvsWidth, cvsHeight); // translate location\n\n        const {\n          center\n        } = room.camera;\n        ctx.translate(cvsWidth / 2 - center.x, cvsHeight / 2 - center.y); // room.camera.center.x++;\n        // draw monster\n        // TODO: monster들의 순서 (누가 위에 놓일 것인지 여부) 처리 필요\n\n        for (const userId in monsters) {\n          let {\n            location,\n            size,\n            color\n          } = monsters[userId];\n          let x = room.camera.getCanvasSize(location.x);\n          let y = room.camera.getCanvasSize(location.y);\n          size = room.camera.getCanvasSize(size);\n          ctx.beginPath();\n          ctx.arc(x, y, size / 2, 0, Math.PI * 2);\n          ctx.fillStyle = color;\n          ctx.fill();\n        }\n\n        if (mouseObj.clicked) {// let destination = {\n          //   x: mouseObj.deltaXfromCenter,\n          //   y: mouseObj.deltaYfromCenter,\n          // };\n          // destination = room.camera.getLocalFromMouse(destination);\n          // socket.changeDestination(room.roomId, destination);\n        }\n      }\n\n      ctx.restore();\n    };\n  }\n\n  render() {\n    if (this.props.room) {\n      const camera = this.props.room.camera;\n      return /*#__PURE__*/_jsxDEV(Canvas, {\n        draw: this.draw,\n        onMouseDown: camera.onMouseDown,\n        onMouseMove: camera.onMouseMove,\n        onMouseUp: camera.onMouseUp,\n        onTouchStart: camera.onTouchStart,\n        onTouchMove: camera.onTouchMove,\n        onTouchEnd: camera.onTouchEnd,\n        onWheel: camera.onWheel,\n        onResize: camera.onResize\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uB85C\\uB529\\uC911...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/shinhojung/git/raising-alien-creatures/client/src/pages/MultiAquarium/MultiField/index.js"],"names":["React","Component","Canvas","Field","draw","ctx","frameCnt","mouseObj","cvsWidth","canvas","width","cvsHeight","height","save","clearRect","props","room","fieldState","monsters","fillStyle","fillRect","center","camera","translate","x","y","userId","location","size","color","getCanvasSize","beginPath","arc","Math","PI","fill","clicked","restore","render","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onWheel","onResize"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Canvas from \"../../../components/Canvas\";\n\n// import * as socket from \"../../../apis/socket\";\n\nexport default class Field extends Component {\n  draw = (ctx, frameCnt, mouseObj) => {\n    // console.log(mouseObj);\n    let cvsWidth = ctx.canvas.width;\n    let cvsHeight = ctx.canvas.height;\n    ctx.save();\n    ctx.clearRect(0, 0, cvsWidth, cvsHeight);\n\n    if (this.props.room && this.props.room.fieldState) {\n      const room = this.props.room;\n      const { monsters } = room.fieldState;\n\n      // draw background\n      // ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n      ctx.fillStyle = `rgba(3, 33, 74, 1)`;\n      ctx.fillRect(0, 0, cvsWidth, cvsHeight);\n\n      // translate location\n      const { center } = room.camera;\n      ctx.translate(cvsWidth / 2 - center.x, cvsHeight / 2 - center.y);\n      // room.camera.center.x++;\n\n      // draw monster\n      // TODO: monster들의 순서 (누가 위에 놓일 것인지 여부) 처리 필요\n      for (const userId in monsters) {\n        let { location, size, color } = monsters[userId];\n        let x = room.camera.getCanvasSize(location.x);\n        let y = room.camera.getCanvasSize(location.y);\n        size = room.camera.getCanvasSize(size);\n        ctx.beginPath();\n        ctx.arc(x, y, size / 2, 0, Math.PI * 2);\n        ctx.fillStyle = color;\n        ctx.fill();\n      }\n\n      if (mouseObj.clicked) {\n        // let destination = {\n        //   x: mouseObj.deltaXfromCenter,\n        //   y: mouseObj.deltaYfromCenter,\n        // };\n        // destination = room.camera.getLocalFromMouse(destination);\n        // socket.changeDestination(room.roomId, destination);\n      }\n    }\n\n    ctx.restore();\n  };\n\n  render() {\n    if (this.props.room) {\n      const camera = this.props.room.camera;\n      return (\n        <Canvas\n          draw={this.draw}\n          onMouseDown={camera.onMouseDown}\n          onMouseMove={camera.onMouseMove}\n          onMouseUp={camera.onMouseUp}\n          onTouchStart={camera.onTouchStart}\n          onTouchMove={camera.onTouchMove}\n          onTouchEnd={camera.onTouchEnd}\n          onWheel={camera.onWheel}\n          onResize={camera.onResize}\n        />\n      );\n    } else {\n      return <div>로딩중...</div>;\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}